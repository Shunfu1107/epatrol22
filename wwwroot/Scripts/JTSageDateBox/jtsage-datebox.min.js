/* JTSage-DateBox-5.3.3 (jqm) | Modes:datebox | 2022-03-14T16:12:53.740Z | (c)2010,2022 JTSage | https://github.com/jtsage/jtsage-datebox/blob/master/LICENSE.txt */

!function(l){l.widget("jtsage.datebox",{initSelector:"input[data-role='datebox']",options:{mode:!1,hideInput:!1,lockInput:!0,safeEdit:!0,controlWidth:"290px",controlWidthImp:"",breakpointWidth:"567px",zindex:"1100",clickEvent:"vclick",disableWheel:!1,useKinetic:!0,flipSizeOverride:!1,defaultValue:!1,showInitialValue:!1,linkedField:!1,linkedFieldFormat:"%J",displayMode:"dropdown",displayDropdownPosition:"bottomRight",displayInlinePosition:"center",displayForcePosition:!1,dismissOutsideClick:!0,dismissOnEscape:!1,useHeader:!0,useImmediate:!1,useButton:!0,buttonIcon:!1,useFocus:!1,useSetButton:!0,useCancelButton:!1,useTodayButton:!1,closeTodayButton:!1,useTomorrowButton:!1,closeTomorrowButton:!1,useClearButton:!1,useCollapsedBut:!1,usePlaceholder:!1,headerFollowsPlaceholder:!0,headerFollowsTitle:!0,headerFollowsLabel:!0,beforeOpenCallback:!1,beforeOpenCallbackArgs:[],openCallback:!1,openCallbackArgs:[],closeCallback:!1,closeCallbackArgs:[],runOnBlurCallback:!1,startOffsetYears:!1,startOffsetMonths:!1,startOffsetDays:!1,afterToday:!1,beforeToday:!1,notToday:!1,maxDate:!1,minDate:!1,maxDays:!1,minDays:!1,maxYear:!1,minYear:!1,blackDates:!1,blackDatesRec:!1,blackDatesPeriod:!1,blackDays:!1,whiteDates:!1,enableDates:!1,validHours:!1,minHour:!1,maxHour:!1,minTime:!1,maxTime:!1,maxDur:!1,minDur:!1,minuteStep:1,minuteStepRound:0,twoDigitYearCutoff:38,flipboxLensAdjust:!1,rolloverMode:{m:!0,d:!0,h:!0,i:!0,s:!0},useLang:"default",lang:{default:{setDateButtonLabel:"Set Date",setTimeButtonLabel:"Set Time",setDurationButtonLabel:"Set Duration",todayButtonLabel:"Jump to Today",tomorrowButtonLabel:"Jump to Tomorrow",titleDateDialogLabel:"Set Date",titleTimeDialogLabel:"Set Time",daysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysOfWeekShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthsOfYear:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsOfYearShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],durationLabel:["Days","Hours","Minutes","Seconds"],durationDays:["Day","Days"],timeFormat:24,headerFormat:"%A, %B %-d, %Y",tooltip:"Open Date Picker",nextMonth:"Next Month",prevMonth:"Previous Month",dateFieldOrder:["m","d","y"],timeFieldOrder:["h","i","a"],datetimeFieldOrder:["y","m","d","h","i","s","a"],slideFieldOrder:["y","m","d"],dateFormat:"%Y-%m-%d",datetimeFormat:"%Y-%m-%dT%k:%M:%S",useArabicIndic:!1,isRTL:!1,calStartDay:0,clearButton:"Clear",cancelButton:"Cancel",durationOrder:["d","h","i","s"],meridiem:["AM","PM"],timeOutput:"%k:%M",durationFormat:"%Dd %DA, %Dl:%DM:%DS",calDateListLabel:"Other Dates",calHeaderFormat:"%B %Y"}},theme_clearBtn:["recycle","a"],theme_closeBtn:["check","a"],theme_cancelBtn:["delete","a"],theme_tomorrowBtn:["action","a"],theme_todayBtn:["action","a"],theme_dropdownContainer:"ui-body-a",theme_modalContainer:"ui-body-a",theme_inlineContainer:"ui-body-a",theme_headerTheme:"inherit",theme_headerBtn:["delete","a"],theme_openButton:!1,theme_cal_Today:"b",theme_cal_DayHigh:"b",theme_cal_Selected:"active",theme_cal_DateHigh:"b",theme_cal_DateHighAlt:"b",theme_cal_DateHighRec:"b",theme_cal_Default:"a",theme_cal_OutOfBounds:"a",theme_cal_NextBtn:["plus","a"],theme_cal_PrevBtn:["minus","a"],theme_cal_Pickers:"a",theme_cal_DateList:"a",theme_dbox_NextBtn:["plus","a"],theme_dbox_PrevBtn:["minus","a"],theme_dbox_Inputs:"inherit",theme_fbox_Selected:"a ui-flipswitch-active",theme_fbox_Default:"a",theme_fbox_Forbidden:"a ui-disabled",theme_fbox_RollHeight:"135px",theme_slide_Today:"b",theme_slide_DayHigh:"b",theme_slide_Selected:"active",theme_slide_DateHigh:"b",theme_slide_DateHighAlt:"b",theme_slide_DateHighRec:"b",theme_slide_Default:"a",theme_slide_NextBtn:["plus","a"],theme_slide_PrevBtn:["minus","a"],theme_slide_NextDateBtn:["carat-r","a"],theme_slide_PrevDateBtn:["carat-l","a"],theme_slide_Pickers:"a",theme_slide_DateList:"a",theme_backgroundMask:{position:"fixed",left:0,top:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,.4)"},theme_headStyle:" .center { text-align: center !important; } .p0 { padding: 0 !important; }.m0 { margin: 0 !important; } .w-100 { width: 100% !important; }",theme_spanStyle:!1,buttonIconDate:"calendar",buttonIconTime:"clock",disabledState:"ui-disabled",tranDone:"webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",durationStep:1,durationSteppers:{d:1,h:1,i:1,s:1}},icons:{getIcon:function(e){var t=this,a=t.options.iconFactory;return!1!==e&&("function"==typeof a?a.call(t,e):"<svg"===e.substr(0,4)?e:void 0!==t.icons[e]?t.icons[e]:t.icons.cancel)},next:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M9.8 6L4 11.8l-1.8-1.7L6.6 6 2.2 2 4 .1 9.8 6z" clip-rule="evenodd" fill-rule="evenodd"/></svg>',prev:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M2.2 6L8 .2l1.8 1.7L5.4 6l4.4 4L8 11.9 2.2 6z" clip-rule="evenodd" fill-rule="evenodd"/></svg>',plus:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5v2h12V5H0z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 0H5v12h2V0z" fill="currentColor"/></svg>',minus:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M0 5v2h12V5H0z" clip-rule="evenodd" fill-rule="evenodd"/></svg>',check:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M12 2.8l-8 8-4-4 1.5-1.5L4 7.8l6.5-6.5L12 2.6z" clip-rule="evenodd" fill-rule="evenodd"/></svg>',cancel:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M11 2.5L9.4 1 1.1 9.5 2.5 11l8.4-8.4z" clip-rule="evenodd" fill-rule="evenodd"/><path fill="currentColor" d="M2.5 1L1 2.6l8.4 8.4L11 9.5 2.5 1.1z" clip-rule="evenodd" fill-rule="evenodd"/></svg>',goto:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M7 3.3C3.8 3.6.4 5.9.4 11.7c2-4.3 4-5 6.8-5v2.9l4.6-4.7L7.1.3v3z" fill-rule="evenodd"/></svg>',clear:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.8 1H8.1c0-.5-.4-1-.8-1H4.7C4.3 0 4 .6 4 1H2.2c-.4 0-.8.3-.8.8v.8c0 .5.4.8.8.8V11c0 .5.4.9.9.9H9c.4 0 .8-.4.8-.9V3.4c.5 0 .8-.3.8-.8v-.8c0-.5-.3-.9-.8-.9zM9 11H3V3.6H4v6.7h.8V3.5h.9v6.7h.8V3.5h.9v6.7H8V3.5h.8V11zm.8-8.4H2.2v-.8h7.6v.8z" fill="currentColor"/></svg>',clock:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M6.8 6h2.5v1.7H5.9a.8.8 0 0 1-.8-.8V2.6h1.7V6zM6 1.2a4.8 4.8 0 1 1 0 9.6 4.8 4.8 0 0 1 0-9.6zM6 .1a6 6 0 0 0-6 6 6 6 0 0 0 6 6 6 6 0 0 0 6-6 6 6 0 0 0-6-6z" clip-rule="evenodd" fill-rule="evenodd"/></svg>',calendar:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M10.5 1h-.8v1.3c0 .2-.2.4-.4.4H7.6a.4.4 0 0 1-.4-.4V1H4.7v1.3c0 .2-.2.4-.4.4H2.6a.4.4 0 0 1-.4-.4V1h-.8c-.5 0-.8.4-.8.8V11c0 .5.4.8.8.8h9.3c.5 0 .8-.4.8-.8V1.8c0-.5-.4-.8-.8-.8zm0 10.1H1.2V3.5h9.3v7.6zM3.7 1.9h-.8V.2h.8v1.7zm5.1 0H8V.2h.8v1.7zM4.5 5.3h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zM2.8 7H2v-.8h.8V7zm1.7 0h-.8v-.8h.8V7zm1.7 0h-.8v-.8h.8V7zm1.7 0h-.8v-.8h.8V7zm1.7 0h-.8v-.8h.8V7zM2.8 8.7H2v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm-6.8 1.7H2v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8z"/></svg>'},styleFunctions:{},_getLongOptions:function(e){var t,a,i={};for(t in e.data())"datebox"===t.substr(0,7)&&7<t.length&&"options"!==(a=(a=t.substr(7)).charAt(0).toLowerCase()+a.slice(1))&&(i[a]=e.data(t));return i},_setOption:function(){l.Widget.prototype._setOption.apply(this,arguments),this.refresh()},getOption:function(e){var t=this.__(e);return"Err:NotFound"!==t?t:this.options[e]},_enhanceDate:function(){Object.assign(this._date.prototype,{copy:function(e,t){return e=Object.assign([0,0,0,0,0,0,0],e),t=Object.assign([0,0,0,0,0,0,0],t),new Date(0<t[0]?t[0]:this.get(0)+e[0],0<t[1]?t[1]:this.get(1)+e[1],0<t[2]?t[2]:this.get(2)+e[2],0<t[3]?t[3]:this.get(3)+e[3],0<t[4]?t[4]:this.get(4)+e[4],0<t[5]?t[5]:this.get(5)+e[5],0<t[6]?t[5]:this.get(6)+e[6])},adj:function(e,t){if("number"!=typeof t||"number"!=typeof e)throw new Error("Invalid Arguments");switch(e){case 0:this.setD(0,this.get(0)+t);break;case 1:this.setD(1,this.get(1)+t);break;case 2:this.setD(2,this.get(2)+t);break;case 3:t*=60;case 4:t*=60;case 5:t*=1e3;case 6:this.setTime(this.getTime()+t)}return this},setD:function(e,t){switch(e){case 0:this.setFullYear(t);break;case 1:this.setMonth(t);break;case 2:this.setDate(t);break;case 3:this.setHours(t);break;case 4:this.setMinutes(t);break;case 5:this.setSeconds(t);break;case 6:this.setMilliseconds(t)}return this},get:function(e){switch(e){case 0:return this.getFullYear();case 1:return this.getMonth();case 2:return this.getDate();case 3:return this.getHours();case 4:return this.getMinutes();case 5:return this.getSeconds();case 6:return this.getMilliseconds()}return!1},get12hr:function(){return 0===this.get(3)?12:this.get(3)<13?this.get(3):this.get(3)-12},iso:function(){var e=[0,0,0],t=0;for(t=0;t<3;t++)e[t]=this.get(t),1===t&&e[t]++,e[t]<10&&(e[t]="0"+String(e[t]));return e.join("-")},comp:function(){return parseInt(this.iso().replace(/-/g,""),10)},getEpoch:function(){return Math.floor(this.getTime()/1e3)},getEpochDays:function(){return Math.floor(this.getTime()/864e5)},getArray:function(){var e=[0,0,0,0,0,0],t=0;for(t=0;t<6;t++)e[t]=this.get(t);return e},setFirstDay:function(e){return this.setD(2,1).adj(2,e-this.getDay()),10<this.get(2)&&this.adj(2,7),this},setDWeek:function(e,t){return 4===e?this.setD(1,0).setD(2,1).setFirstDay(4).adj(2,-3).adj(2,7*(t-1)):this.setD(1,0).setD(2,1).setFirstDay(e).adj(2,7*(t-1))},getDWeek:function(e){var t,a;switch(e){case 0:return t=this.copy([0,-1*this.getMonth()]).setFirstDay(0),Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1;case 1:return t=this.copy([0,-1*this.getMonth()]).setFirstDay(1),Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1;case 4:return 11===this.getMonth()&&28<this.getDate()?1:(t=this.copy([0,-1*this.getMonth()],!0).setFirstDay(4).adj(2,-3),(a=Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1)<1?(t=this.copy([-1,-1*this.getMonth()]).setFirstDay(4).adj(2,-3),Math.floor((this.getTime()-t.getTime())/6048e5)+1):a);default:return 0}}})},_ord:{default:function(e){var t=e%10;return 9<e&&e<21||3<t?"th":["th","st","nd","rd"][t]}},_customformat:{default:function(e,t,a){return!1}},_formatter:function(e,i,t){var n,o=this,s=this.options,r=0;return void 0===t&&(t=!0),"dura"===s.mode.substr(0,4)&&(r=o._dur(this.theDate.getTime()-this.initDate.getTime()),e.match(/%Dd/)||(r[1]+=24*r[0]),e.match(/%Dl/)||(r[2]+=60*r[1]),e.match(/%DM/)||(r[3]+=60*r[2])),e=e.replace(/%(D|X|0|-)*([1-9a-zA-Z])/g,function(e,t,a){if("X"===t)return"function"==typeof o._customformat[s.mode]?o._customformat[s.mode](a,i,s):e;if("D"===t)switch(a){case"d":return r[0];case"l":return o._zPad(r[1]);case"M":return o._zPad(r[2]);case"S":return o._zPad(r[3]);case"A":return o.__("durationDays")[1===r[0]?0:1];default:return e}switch(a){case"a":return o.__("daysOfWeekShort")[i.getDay()];case"A":return o.__("daysOfWeek")[i.getDay()];case"b":return o.__("monthsOfYearShort")[i.getMonth()];case"B":return o.__("monthsOfYear")[i.getMonth()];case"C":return parseInt(i.getFullYear()/100);case"d":return o._zPad(i.getDate(),t);case"H":case"k":return o._zPad(i.getHours(),t);case"I":case"l":return o._zPad(i.get12hr(),t);case"m":return o._zPad(i.getMonth()+1,t);case"M":return o._zPad(i.getMinutes(),t);case"p":case"P":return n=o.__("meridiem")[i.get(3)<12?0:1].toUpperCase(),"P"===a?n.toLowerCase():n;case"s":return i.getEpoch();case"S":return o._zPad(i.getSeconds(),t);case"u":return o._zPad(i.getDay()+1,t);case"w":return i.getDay();case"y":return o._zPad(i.getFullYear()%100);case"Y":return i.getFullYear();case"E":return i.getFullYear()+543;case"V":return o._zPad(i.getDWeek(4),t);case"U":return o._zPad(i.getDWeek(0),t);case"W":return o._zPad(i.getDWeek(1),t);case"o":return"function"==typeof o._ord[s.useLang]?o._ord[s.useLang](i.getDate()):o._ord.default(i.getDate());case"j":return n=new o._date(i.getFullYear(),0,1),(n="000"+String(Math.ceil((i-n)/864e5)+1)).slice(-3);case"J":return i.toJSON();case"G":return n=i.getFullYear(),1===i.getDWeek(4)&&0<i.getMonth()?n+1:51<i.getDWeek(4)&&i.getMonth()<11?n-1:n;case"g":return n=i.getFullYear%100,1===i.getDWeek(4)&&0<i.getMonth()&&++n,51<i.getDWeek(4)&&i.getMonth()<11&&--n,o._zpad(n);default:return e}}),!0===o.__("useArabicIndic")&&!0===t&&(e=o._dRep(e)),e},_minStepFix:function(){var e=this.theDate.get(4),t=this.options.minuteStep,a=this.options.minStepRound,i=e%t;1<t&&0<i&&(a<0?e-=i:0<a?e+=t-i:e%t<t/2?e-=i:e+=t-i,this.theDate.setMinutes(e))},_newDateCheck:{enableDate:function(e){return-1<this.options.enableDates.indexOf(e.iso)},whiteDate:function(e){return!1!==this.options.whiteDates&&-1<this.options.whiteDates.indexOf(e.iso)},notToday:function(e){return!1!==this.options.notToday&&this.realToday.comp()===e.comp()},maxYear:function(e){var t=this.options.maxYear;return!1!==t&&e.get(0)>t},minYear:function(e){var t=this.options.minYear;return!1!==t&&e.get(0)<t},minDate:function(e){var t=this.options.minDate;return!1!==t&&e<(t=this.parseISO(t))},maxDate:function(e){var t=this.options.maxDate;return!1!==t&&((t=this.parseISO(t)).adj(2,1),t<e)},afterToday:function(e){return!1!==this.options.afterToday&&e<this.realToday},beforeToday:function(e){return!1!==this.options.beforeToday&&e>this.realToday},minmaxDays:function(e){var t,a,i=this.options.minDays,n=this.options.maxDays;return(!1!==i||!1!==n)&&(t=!1===i||this.realToday.getEpochDays()-(i+1)<e.getEpochDays(),a=!1===n||this.realToday.getEpochDays()+(n+1)>e.getEpochDays(),!(t&&a))},minHour:function(e){var t=this.options.minHour;return!1!==t&&e.get(3)<t},maxHour:function(e){var t=this.options.maxHour;return!1!==t&&e.get(3)>t},minTime:function(e){var t,a=this.options.minTime,i=e.get(3);return!1!==a&&(i<(t=this.options.minTime.split(":",2))[0]||!(i>t[0])&&e.get(4)<t[1])},maxTime:function(e){var t,a=this.options.maxTime,i=e.get(3);return!1!==a&&(!(i<(t=this.options.maxTime.split(":",2))[0])&&(i>t[0]||e.get(4)>t[1]))},validHours:function(e){return-1<this.options.validHours.indexOf(e.get(3))},blackDays:function(e){var t=this.options.blackDays;return!1!==t&&-1<t.indexOf(e.getDay())},blackDates:function(e){var t=this.options.blackDates;return!1!==t&&-1<t.indexOf(e.iso())},blackDatesRec:function(e){var t,a=this.options.blackDatesRec;if(!1===a)return!1;for(t=0;t<a.length;t++)if(!(-1!==a[t][0]&&a[t][0]!==e.get(0)||-1!==a[t][1]&&a[t][1]!==e.get(1)||-1!==a[t][2]&&a[t][2]!==e.get(2)))return!0;return!1},blackDatesPeriod:function(e){var t,a,i=this.options.blackDatesPeriod;return!1!==i&&(t=i[0].split("-"),a=new Date(t[0],t[1]-1,t[2],12,1,1,1),Math.round((e.getTime()-a.getTime())/864e5)%i[1]==0)}},_newDateChecker:function(e){var t,a=this,i=!1,n={good:!0,bad:!1,failrule:!1,passrule:!1,dateObj:e.copy()},o=["blackDays","blackDates","blackDatesRec","blackDatesPeriod","notToday","maxYear","minYear","afterToday","beforeToday","maxDate","minDate","minmaxDays","minHour","maxHour","minTime","maxTime"];if(a.realToday=new a._date,!1!==this.options.enableDates)return a._newDateCheck.whiteDate.call(a,e)?n.passrule="enableDates":(n.bad=!0,n.good=!1,n.failrule="enableDates"),n;if(!1!==this.options.validHours)return a._newDateCheck.validHours.call(a,e)?n.passrule="validHours":(n.bad=!0,n.good=!1,n.failrule="validHours"),n;if(a._newDateCheck.whiteDate.call(a,e))return n.passrule="whiteDates",n;for(t=0;t<o.length&&!i;t++)a._newDateCheck[o[t]].call(a,e)&&(n.bad=!0,n.good=!1,n.failrule=o[t],i=!0);return n},_getCleanDur:function(){var e=this,t=this.options,a=e.theDate.getEpoch()-e.initDate.getEpoch();return a<0&&(a=0,e.theDate=e.initDate.copy()),!1!==t.minDur&&a<t.minDur&&(e.theDate=new e._date(e.initDate.getTime()+1e3*t.minDur),a=t.minDur),!1!==t.maxDur&&a>t.maxDur&&(e.theDate=new e._date(e.initDate.getTime()+1e3*t.maxDur),a=t.maxDur),e.lastDuration=a,e.lastDurationA=e._dur(1e3*a),[a,e._dur(1e3*a)]},_check:function(){var e=this._newDateChecker(this.theDate);return this.dateOK=!0===e.good,e.good},_fixstepper:function(e){var t=this.options.durationSteppers,a=this.options.durationStep;-1<e.indexOf("d")&&(t.d=a),-1<e.indexOf("h")&&(t.d=1,t.h=a),-1<e.indexOf("i")&&(t.h=1,t.i=a),-1<e.indexOf("s")&&(t.i=1,t.s=a)},_ThemeDateCK:{selected:function(e){return!1!==this.options.slideHighPick&&(void 0!==this.originalDate&&this.originalDate.iso()===e.iso())},today:function(e){return!1!==this.options.slideHighToday&&this.realToday.iso()===e.iso()},highDates:function(e){var t=this.options.highDates;return!1!==t&&-1<t.indexOf(e.iso())},highDatesAlt:function(e){var t=this.options.highDatesAlt;return!1!==t&&-1<t.indexOf(e.iso())},highDatesRec:function(e){var t,a=this.options.highDatesRec;if(!1===a)return!1;for(t=0;t<a.length;t++)if(!(-1!==a[t][0]&&a[t][0]!==e.get(0)||-1!==a[t][1]&&a[t][1]!==e.get(1)||-1!==a[t][2]&&a[t][2]!==e.get(2)))return!0;return!1},highDatesPeriod:function(e){var t,a,i=this.options.highDatesPeriod;return!1!==i&&(t=i[0].split("-"),a=new Date(t[0],t[1]-1,t[2],12,1,1,1),Math.round((e.getTime()-a.getTime())/864e5)%i[1]==0)},highDays:function(e){var t=this.options.highDays;return!1!==t&&-1<t.indexOf(e.getDay())}},_parser:{default:function(e){return e}},_makeDate:function(e,t){var a,i,n,o,s=this,r=this.options,d=this.options.defaultValue,l=s.__fmt(),u=null,c=[],h=!1,p=new s._date,f={year:-1,mont:-1,date:-1,hour:-1,mins:-1,secs:-1,week:!1,wtyp:4,wday:!1,yday:!1,meri:0};if(void 0===t&&(t=!1),e=void 0===e?"":(!0===s.__("useArabicIndic")?s._dRep(e,-1):e).trim(),void 0===r.mode)return p;if(void 0!==s._parser[r.mode])return s._parser[r.mode].call(s,e);if("durationbox"===r.mode||"durationflipbox"===r.mode){if(l=l.replace(/%D([a-z])/gi,function(e,t){switch(t){case"d":case"l":case"M":case"S":return"("+e+"|[0-9]+)";default:return".+?"}}),u=(l=new RegExp("^"+l+"$")).exec(e),n=l.exec(s.__fmt()),null===u||u.length!==n.length)return"number"==typeof d&&0<d?new s._date(1e3*(s.initDate.getEpoch()+parseInt(d,10))):new s._date(s.initDate.getTime());for(i=s.initDate.getEpoch(),a=1;a<u.length;a++)o=parseInt(u[a],10),n[a].match(/^%Dd$/i)&&(i+=86400*o),n[a].match(/^%Dl$/i)&&(i+=3600*o),n[a].match(/^%DM$/i)&&(i+=60*o),n[a].match(/^%DS$/i)&&(i+=o);return new s._date(1e3*i)}if("%J"===l)return p=new s._date(e),isNaN(p.getDate())&&(p=new s._date),p;if(l=l.replace(/%(0|-)*([a-z])/gi,function(e,t,a){switch(c.push(a),a){case"p":case"P":case"b":case"B":return"("+e+"|.+?)";case"H":case"k":case"I":case"l":case"m":case"M":case"S":case"V":case"U":case"u":case"W":case"d":return"("+e+"|[0-9]{"+("-"===t?"1,":"")+"2})";case"j":return"("+e+"|[0-9]{3})";case"s":return"("+e+"|[0-9]+)";case"g":case"y":return"("+e+"|[0-9]{2})";case"E":case"G":case"Y":return"("+e+"|[0-9]{1,4})";default:return c.pop(),".+?"}}),u=(l=new RegExp("^"+l+"$")).exec(e),n=l.exec(s.__fmt()),null===u||u.length!==n.length){if(""!==e&&(h=!0),!1!==d&&""!==d)switch(typeof d){case"object":"function"==typeof d.getDay?p=d:3===d.length&&(p=s._pa(d,"time"===r.mode.substr(0,4)&&p));break;case"number":p=new s._date(1e3*d);break;case"string":p="+"===d.substr(0,1)?(new s._date).adj(5,parseInt(d.substr(1),10)):"-"===d.substr(0,1)?(new s._date).adj(5,-1*parseInt(d.substr(1),10)):"time"===r.mode.substr(0,4)?(i=Object.assign([0,0,0],d.split(":",3)),s._pa(i,p)):((i=Object.assign([0,0,0],d.split("-",3)))[1]--,s._pa(i,!1))}isNaN(p.getDate())&&(p=new s._date)}else{for(a=1;a<u.length;a++)switch(o=parseInt(u[a],10),c[a-1]){case"s":return new s._date(1e3*parseInt(u[a],10));case"Y":case"G":f.year=o;break;case"E":f.year=o-543;break;case"y":case"g":r.afterToday||o<r.twoDigitYearCutoff?f.year=2e3+o:f.year=1900+o;break;case"m":f.mont=o-1;break;case"d":f.date=o;break;case"H":case"k":case"I":case"l":f.hour=o;break;case"M":f.mins=o;break;case"S":f.secs=o;break;case"u":f.wday=o-1;break;case"w":f.wday=o;break;case"j":f.yday=o;break;case"V":f.week=o,f.wtyp=4;break;case"U":f.week=o,f.wtyp=0;break;case"W":f.week=o,f.wtyp=1;break;case"p":case"P":o=new RegExp("^"+u[a]+"$","i"),f.meri=o.test(s.__("meridiem")[0])?-1:1;break;case"b":-1<(i=s.__("monthsOfYearShort").indexOf(u[a]))&&(f.mont=i);break;case"B":-1<(i=s.__("monthsOfYear").indexOf(u[a]))&&(f.mont=i)}if(0!==f.meri&&(-1===f.meri&&12===f.hour&&(f.hour=0),1===f.meri&&12!==f.hour&&(f.hour=f.hour+12)),p=new s._date(s._n(f.year,0),s._n(f.mont,0),s._n(f.date,1),s._n(f.hour,0),s._n(f.mins,0),s._n(f.secs,0),0),f.year<100&&-1!==f.year&&p.setFullYear(f.year),-1<f.mont&&-1<f.date||-1<f.hour&&-1<f.mins&&-1<f.secs)return!0===t?[p,h]:p;!1!==f.week&&(p.setDWeek(f.wtyp,f.week),-1<f.date&&p.setDate(f.date)),!1!==f.yday&&p.setD(1,0).setD(2,1).adj(2,f.yday-1),!1!==f.wday&&p.adj(2,f.wday-p.getDay())}return!0===t?[p,h]:p},_event:function(e,t){var a,i,n=l(this).data("jtsage-datebox"),o=l(this).data("jtsage-datebox").options;if(!e.isPropagationStopped())switch(t.method){case"close":void 0===t.closeCancel&&(t.closeCancel=!1),n.cancelClose=t.closeCancel,n.close();break;case"open":n.open();break;case"set":if("object"==typeof t.value)n.theDate=t.value,n._t({method:"doset"});else{if("inline"!==o.displayMode&&"blind"!==o.displayMode||(n.originalDate=n.theDate),l(this).val(t.value),!1!==o.linkedField)if("string"==typeof o.linkedField)l(o.linkedField).val(n.callFormat(o.linkedFieldFormat,n.theDate,!1));else for(i=0;i<o.linkedField.length;i++)l(o.linkedField[i].id).val(n.callFormat(o.linkedField[i].format,n.theDate,!1));n.skipChange=!0,l(this).trigger("change")}break;case"doset":"function"==typeof n[a="_"+n.options.mode+"DoSet"]?n[a].call(n):n._t({method:"set",value:n._formatter(n.__fmt(),n.theDate),date:n.theDate});break;case"dooffset":t.type&&n._offset(t.type,t.amount,!0);break;case"dorefresh":n.refresh();break;case"doclear":l(this).val("").trigger("change");break;case"clear":l(this).trigger("change")}},_build:{default:function(){!(this.d.headerText="Error")!==this.d.intHTML&&this.d.intHTML.remove().empty(),this.d.intHTML=l("<div style='width:100%'><h2 style='text-align:center;color:red;'>Unknown Mode</h2></div>")},timebox:function(){this._build.datebox.call(this)},datetimebox:function(){this._build.datebox.call(this)},durationbox:function(){this._build.datebox.apply(this,[])},datebox:function(){var e,t,a,i,n=this,o=this.options,s=n.style_dboxCtr(),r="durationbox"===o.mode,d=["d","h","i","s"];for("boolean"!=typeof n.d.intHTML&&n.d.intHTML.empty().remove(),n.d.headerText=n._grabLabel("datebox"===o.mode||"datetimebox"===o.mode?n.__("titleDateDialogLabel"):n.__("titleTimeDialogLabel")),n.d.intHTML=l("<span>"),n.d.intHTML.addClass(o.theme_spanStyle),n.fldOrder=n._getFldOrder(o.mode),r?(n.dateOK=!0,n._fixstepper(n.fldOrder)):(n._check(),n._minStepFix()),"datebox"!==o.mode&&"datetimebox"!==o.mode||n.style_subHead(n._formatter(n.__("headerFormat"),n.theDate)).appendTo(n.d.intHTML),i=n.style_dboxRow(),t=0;t<n.fldOrder.length;t++)"a"===n.fldOrder[t]&&12!==n.__("timeFormat")||(e=r?o.durationSteppers[n.fldOrder[t]]:"i"===n.fldOrder[t]?o.minuteStep:1,(a=n.style_dboxCtrl(o.theme_dbox_PrevBtn,o.theme_dbox_NextBtn,n.fldOrder[t],r?n.__("durationLabel")[d.indexOf(n.fldOrder[t])]:null,o.theme_dbox_Inputs)).find("input").data({field:n.fldOrder[t],amount:e}),a.find(".dbBoxNext").data({field:n.fldOrder[t],amount:e}),a.find(".dbBoxPrev").data({field:n.fldOrder[t],amount:-1*e}),i.append(a));!0===n.__("isRTL")&&i.children().each(function(e,t){i.prepend(t)}),s.append(i),s.appendTo(n.d.intHTML),n._dbox_run_update(!0),n.d.intHTML.append(n._doBottomButtons.call(n,!0)),n.d.intHTML.on("change","input",function(){n._dbox_enter(l(this))}).on("keypress","input",function(e){13===e.which&&!0===n.dateOK&&(n._dbox_enter(l(this)),n._t({method:"set",value:n._formatter(n.__fmt(),n.theDate),date:n.theDate}),n._t({method:"close"}))}).on(n.wheelEvent,"input",function(e,t){e.preventDefault(),t=void 0===t?Math.sign(e.originalEvent.wheelDelta):t,n._offset(l(this).data("field"),(t<0?-1:1)*l(this).data("amount"))}).on(o.clickEvent,".dbBoxPrev, .dbBoxNext",function(e){n.d.intHTML.find(":focus").blur(),e.preventDefault(),n._offset(l(this).data("field"),l(this).data("amount"))})}},_drag:{default:function(){return!1}},_offset:function(e,t,a){var i,n,o,s,r=this,d=r.options,l=["y","m","d","h","i","s"].indexOf(e),u=32-r.theDate.copy([0],[0,0,32,13]).getDate(),c=[31,32-r.theDate.copy([0],[0,1,32,13]).getDate(),31,30,31,30,31,31,30,31,30,31],h="a"!==e&&("y"===e||void 0===d.rolloverMode[e]||!0===d.rolloverMode[e]);if(void 0===a&&(a=!0),"y"===e&&1===r.theDate.get(1)&&29===r.theDate.get(2)&&r.theDate.setD(2,28),"a"===e)t%2!=0&&(i=11<r.theDate.get(3)?-12:12,r.theDate.adj(3,i));else if(h)r.theDate.adj(l,t);else{switch(e){case"m":n=11,o=0,s=12;break;case"d":o=1,s=n=u;break;case"h":n=23,o=0,s=24;break;case"i":case"s":n=59,o=0,s=60}(i=r.theDate.get(l)+t)<o?i=i%s+s:n<i&&(i%=s),"m"===e&&r.theDate.get(2)>c[i]&&r.theDate.setD(2,c[i]),r.theDate.setD(l,i)}!0===a&&r.refresh(),d.useImmediate&&r._t({method:"doset"}),"calbox"===d.mode&&r._t({method:"displayChange",selectedDate:r.originalDate,shownDate:r.theDate,thisChange:e,thisChangeAmount:t,gridStart:r.getCalStartGrid(),gridEnd:r.getCalEndGrid(),selectedInGrid:r.isSelectedInCalGrid(),selectedInBounds:r.isSelectedInBounds()}),r._t({method:"offset",type:e,amount:t,newDate:r.theDate})},_startOffset:function(e){var t=this.options;return!1!==t.startOffsetYears&&e.adj(0,t.startOffsetYears),!1!==t.startOffsetMonths&&e.adj(1,t.startOffsetMonths),!1!==t.startOffsetDays&&e.adj(2,t.startOffsetDays),e},_posZero:function(e){return e<0?0:e},getModalPosition:function(){var e=this.options.displayForcePosition,t=this.d.mainWrap[0].getBoundingClientRect();return!1!==e?{position:"absolute",top:e[0],left:e[1]}:{position:"fixed",top:"50%",left:"50%","margin-left":t.width/2*-1,"margin-top":t.height/2*-1}},getDropPosition:function(e){var t,a=this,i=this.options,n=this.options.displayForcePosition,o=a.d.wrap[0].getBoundingClientRect(),s=a.d.mainWrap[0].getBoundingClientRect(),r=window.pageYOffset,d=window.pageXOffset,l=Math.max(document.documentElement.clientWidth,window.innerWidth||0)<=i.breakpointWidth.replace("px","");return void 0===(t={centerLeft:{top:a._posZero(r+o.top+o.height/2-s.height/2),left:a._posZero(d+o.left)},centerRight:{top:a._posZero(r+o.top+o.height/2-s.height/2),left:a._posZero(d+o.left+o.width-s.width)},centerMiddle:{top:a._posZero(r+o.top+o.height/2-s.height/2),left:a._posZero(d+o.left+o.width/2-s.width/2)},topLeft:{top:a._posZero(r+o.top-s.height-1),left:a._posZero(d+o.left)},topRight:{top:a._posZero(r+o.top-s.height-1),left:a._posZero(d+o.left+o.width-s.width)},topMiddle:{top:a._posZero(r+o.top-s.height-1),left:a._posZero(d+o.left+o.width/2-s.width/2)},bottomLeft:{top:a._posZero(r+o.top+o.height),left:a._posZero(d+o.left)},bottomRight:{top:a._posZero(r+o.top+o.height),left:a._posZero(d+o.left+o.width-s.width)},bottomMiddle:{top:a._posZero(r+o.top+o.height),left:a._posZero(d+o.left+o.width/2-s.width/2)}})[e]&&(e="bottomRight"),!1!==n?{position:"absolute",top:n[0],left:n[1]}:{position:"absolute",top:t[e].top,left:l?0:t[e].left}},getTheDate:function(){return this.theDate},getSelectedDate:function(){return this.originalDate},getLastDur:function(){return this.lastDuration},dateVisible:function(){return void 0===this.isSelectedInCalGrid||this.isSelectedInCalGrid()},setTheDate:function(e){this.theDate="object"==typeof e?e:this._makeDate(e),this.refresh(),this._t({method:"doset"})},parseDate:function(e,t){var a;return this.fmtOver=e,a=this._makeDate(t),this.fmtOver=!1,a},parseISO:function(e){return this.parseDate("%Y-%m-%d",e)},callFormat:function(e,t,a){return void 0===a&&(a=!1),this._formatter(e,t,a)},refresh:function(){var e=this,t=this.options;"function"!=typeof e._build[t.mode]?e._build.default.call(e):e._build[t.mode].call(e),!0===e.__("useArabicIndic")&&e._doIndic(),e.d.mainWrap.append(e.d.intHTML),e._t({method:"postrefresh"})},applyMinMax:function(e,t){var a,i=this.options,n=RegExp(/\d\d\d\d-\d\d-\d\d/);void 0===e&&(e=!0),void 0===t&&(t=!0),!0!==t&&!1!==i.minDate||(a=this.d.input.attr("min"),n.test(a)&&(i.minDate=a)),!0!==t&&!1!==i.maxDate||(a=this.d.input.attr("max"),n.test(a)&&(i.maxDate=a)),!0===e&&this._t({method:"refresh"})},_dur:function(e){return[Math.max(0,Math.floor(e/864e5)),Math.max(0,Math.floor(e/36e5%24)),Math.max(0,Math.floor(e/6e4%60)),Math.max(0,Math.floor(e/1e3%60))]},__:function(e){var t=this.options,a=t.lang[t.useLang],i=t[t.mode+"lang"],n="override"+e.charAt(0).toUpperCase()+e.slice(1);return void 0!==t[n]?t[n]:void 0!==a&&void 0!==a[e]?a[e]:void 0!==i&&void 0!==i[e]?i[e]:void 0!==t.lang.default[e]?t.lang.default[e]:"Err:NotFound"},__fmt:function(){var e=this,t=this.options;if(void 0!==e.fmtOver&&!1!==e.fmtOver)return e.fmtOver;switch(t.mode){case"timebox":case"timeflipbox":return e.__("timeOutput");case"durationbox":case"durationflipbox":return e.__("durationFormat");case"datetimebox":case"datetimeflipbox":return e.__("datetimeFormat");default:return e.__("dateFormat")}},_zPad:function(e,t){return void 0!==t&&"-"===t?String(e):(e<10?"0":"")+String(e)},_dRep:function(e,t){var a,i,n=48,o=57,s=1584,r="";for(-1===t&&(n+=s,o+=s,s=-1584),i=0;i<e.length;i++)r+=n<=(a=e.charCodeAt(i))&&a<=o?String.fromCharCode(a+s):String.fromCharCode(a);return r},_doIndic:function(){var e=this;e.d.intHTML.find("*").each(function(){l(this).children().length<1&&l(this).html(e._dRep(l(this).html()))}),e.d.intHTML.find("input").each(function(){l(this).val(e._dRep(l(this).val()))})},_n:function(e,t){return e<0?t:e},_pa:function(e,t){return"boolean"==typeof t?new this._date(e[0],e[1],e[2],0,0,0,0):new this._date(t.get(0),t.get(1),t.get(2),e[0],e[1],e[2],0)},_btwn:function(e,t,a){return t<e&&e<a},_grabLabel:function(e,t){var a,i,n=this.options,o=!1;return void 0===t&&(t=!1),void 0===n.overrideDialogLabel?(a=this.d.input.attr("placeholder"),i=this.d.input.attr("title"),void 0!==a&&(t||n.headerFollowsPlaceholder)?a:void 0!==i&&(t||n.headerFollowsTitle)?i:(o=l(document).find("label[for='"+this.d.input.attr("id")+"']").text(),t||n.headerFollowsLabel?""===o?e:o:e)):n.overrideDialogLabel},_getFldOrder:function(e){switch(e){case"durationbox":case"durationflipbox":return this.__("durationOrder");case"timebox":case"timeflipbox":return this.__("timeFieldOrder");case"datetimebox":case"datetimeflipbox":return this.__("datetimeFieldOrder");default:return this.__("dateFieldOrder")}},_t:function(e){this.d.input.trigger("datebox",e)},_prepFunc:function(e){return!1===e||"function"==typeof e?e:"function"==typeof window[e]&&window[e]},_pickRanges:function(e,t,a,i){var n,o=this.options,s=!1===i?a:t,r=0,d=0,l={month:[],year:[]};for(n=0;n<=11;n++)n===e?l.month.push([n,this.__("monthsOfYear")[n],!0]):l.month.push([n,this.__("monthsOfYear")[n],!1]);for(r=o.calYearPickMin<1?s+o.calYearPickMin:o.calYearPickMin<1800?s-o.calYearPickMin:"NOW"===o.calYearPickMin?a:o.calYearPickMin,d=o.calYearPickMax<1800?s+o.calYearPickMax:"NOW"===o.calYearPickMax?a:o.calYearPickMax,n=r;n<=d;n++)n===t?l.year.push([n,n,!0]):l.year.push([n,n,!1]);return l},_stdSel:function(e,t,a){var i,n="<select class='"+a+"' id='"+t+"'>";for(i=0;i<e.length;i++)n+="<option value='"+e[i][0]+"'"+(!0===e[i][2]?" selected='selected'":"")+">"+e[i][1]+"</option>";return n+="</select>"},_stdBtn:{cancel:function(){var t=this,e=this.options;return l(t.style_btn(e.theme_cancelBtn,t.__("cancelButton"))).on(e.clickEvent,function(e){e.preventDefault(),t._t({method:"close",closeCancel:!0})})},clear:function(){var t=this,e=this.options;return l(t.style_btn(e.theme_clearBtn,t.__("clearButton"))).on(e.clickEvent,function(e){e.preventDefault(),t.d.input.val(""),t._t({method:"clear"}),t._t({method:"close",closeCancel:!0})})},close:function(e,t){var a=this,i=this.options;return void 0===t&&(t=!1),l(a.style_btn(i.theme_closeBtn,e)).addClass(!0===a.dateOK?"":"disabled").on(i.clickEvent,function(e){e.preventDefault(),!0===a.dateOK&&(!1===t?a._t({method:"set",value:a._formatter(a.__fmt(),a.theDate),date:a.theDate}):a._t(t),a._t({method:"close"}))})},today:function(){var t=this,a=this.options;return l(t.style_btn(a.theme_todayBtn,t.__("todayButtonLabel"))).on(a.clickEvent,function(e){e.preventDefault(),t.theDate=t._pa([0,0,0],new t._date),t._t({method:"dorefresh"}),!1!==a.closeTodayButton&&(t._t({method:"doset"}),t._t({method:"close"}))})},tomorrow:function(){var t=this,a=this.options;return l(t.style_btn(a.theme_tomorrowBtn,t.__("tomorrowButtonLabel"))).on(a.clickEvent,function(e){e.preventDefault(),t.theDate=t._pa([0,0,0],new t._date).adj(2,1),t._t({method:"dorefresh"}),!1!==a.closeTomorrowButton&&(t._t({method:"doset"}),t._t({method:"close"}))})}},_doBottomButtons:function(e){var t,a,i=this,n=this.options;if(!(n.useSetButton&&e||n.useTodayButton||n.useTomorrowButton||n.useClearButton||n.useCancelButton))return"";if(t=i.style_btnGrp(n.useCollapsedBut),n.useSetButton&&e){switch(n.mode){case"timebox":case"timeflipbox":a=i.__("setTimeButtonLabel");break;case"durationbox":case"duartionflipbox":a=i.__("setDurationButtonLabel");break;default:a=i.__("setDateButtonLabel")}i.setBut=i._stdBtn.close.call(i,a),i.setBut.appendTo(t)}return n.useTodayButton&&t.append(i._stdBtn.today.call(i)),n.useTomorrowButton&&t.append(i._stdBtn.tomorrow.call(i)),n.useClearButton&&t.append(i._stdBtn.clear.call(i)),n.useCancelButton&&t.append(i._stdBtn.cancel.call(i)),"function"==typeof i.style_btnGrpOut&&(t=i.style_btnGrpOut(n.useCollapsedBut,t)),t},close:function(){var e,t=this,a=this.options,i={};switch(a.closeCallback=t._prepFunc(a.closeCallback),!1!==a.closeCallback?i.afterclose=function(){a.closeCallback.apply(t,[{initDate:t.initDate,date:t.theDate,duration:t.lastDuration,cancelClose:t.cancelClose}].concat(a.closeCallbackArgs))}:i.afterclose=function(){return!0},a.displayMode){case"blind":t.d.mainWrap.slideUp();case"inline":return i.afterclose.call(),!0;default:l(".jtsage-datebox-backdrop-div").remove(),t.d.mainWrap.removeClass("db-show"),i.afterclose.call(),t.d.mainWrap.hide(),t.d.mainWrap.detach()}l(document).off(t.drag.eMove).off(t.drag.eEnd).off(t.drag.eEndA).off("resize"+t.eventNamespace).off("keydown"+t.eventNamespace),a.useFocus&&(t.fastReopen=!0,setTimeout((e=t,function(){e.fastReopen=!1}),300))},_create:function(){l(document).trigger("dateboxcreate");var e,t,a=this,i=Object.assign(this.options,this._getLongOptions(this.element),this.element.data("options")),n={input:this.element,wrap:this.element.parent(),mainWrap:l("<div class='dbContainer_"+this.uuid+"'>").css("zIndex",i.zindex),intHTML:!1},o="<style>.dbContainer_"+this.uuid+" { touch-action: none; width: "+i.controlWidth+i.controlWidthImp+"} @media (max-width: "+i.breakpointWidth+") { .dbContainer_"+this.uuid+" { width: 100% "+i.controlWidthImp+"} } "+(!1!==i.theme_headStyle?i.theme_headStyle:"")+"</style>",s=".datebox"+this.uuid,r={eStart:"touchstart"+s+" mousedown"+s,eMove:"touchmove"+s+" mousemove"+s,eEnd:"touchend"+s+" mouseup"+s,eEndA:["mouseup","touchend","touchcancel","touchmove"].join(s+" ")+s,move:!1,start:!1,end:!1,pos:!1,target:!1,delta:!1,tmp:!1};l("head").append(l(o)),a.d=n,a.drag=r,a.icons=this.icons,!1!==i.usePlaceholder&&a.d.input.attr("placeholder","string"==typeof i.usePlaceholder?i.usePlaceholder:a._grabLabel("",!0)),a.wheelEvent=i.disableWheel?"nonsenseEvent":void 0!==l.event.special.mousewheel?"mousewheel":"wheel",a.firstOfGrid=!1,a.lastOfGrid=!1,a.selectedInGrid=!1,a.skipChange=!1,a.cancelClose=!1,a.disabled=!1,a._date=window.Date,a._enhanceDate(),a.baseID=a.d.input.attr("id"),a.initDate=new a._date,a.initDate.setMilliseconds(0),a.theDate=i.defaultValue?a._makeDate():""!==a.d.input.val()?a._makeDate(a.d.input.val()):new a._date,""===a.d.input.val()&&a._startOffset(a.theDate),a.initDone=!1,i.showInitialValue&&a.d.input.val(a._formatter(a.__fmt(),a.theDate)),a.d.wrap=a.style_inWrap(a.d.input,i.theme_openButton),!1!==i.mode&&!1===i.buttonIcon&&(i.buttonIcon="time"===i.mode.substr(0,4)||"dur"===i.mode.substr(0,3)?i.buttonIconTime:i.buttonIconDate),i.useButton?(l(a.style_inBtn(i.buttonIcon,a.__("tooltip"),i.theme_openButton)).appendTo(a.d.wrap),a.d.wrap.on(i.clickEvent,".dbOpenButton",function(e){e.preventDefault(),i.useFocus?a.d.input.focus():a.disabled||a._t({method:"open"})})):a.style_inNoBtn(a.d.wrap),i.hideInput&&a.style_inHide(),i.runOnBlurCallback=a._prepFunc(i.runOnBlurCallback),a.d.input.on("focus.datebox",function(){!1===a.disabled&&i.useFocus&&a._t({method:"open"})}).on("change.datebox",function(){if(a.skipChange)return!(a.skipChange=!1);!1===i.runOnBlurCallback?!0===i.safeEdit?!1===(e=a._makeDate(a.d.input.val(),!0))[1]?a.theDate=e[0]:(a.theDate=a.originalDate,a._t({method:"doset"})):a.theDate=a._makeDate(a.d.input.val()):(e=a._makeDate(a.d.input.val(),!0),"object"!=typeof(t=i.runOnBlurCallback.call(a,{origDate:a.originalDate,input:a.d.input.val(),oldDate:a.theDate,newDate:e[0],isGood:!e[1],isBad:e[1]}))?a.theDate=e[0]:(a.theDate=t,a._t({method:"doset"}))),a.originalDate=a.theDate.copy(),a.refresh()}).on("datebox",a._event),i.lockInput&&a.d.input.attr("readonly","readonly"),a.d.input.is(":disabled")&&a.disable(),a.applyMinMax(!1,!1),"inline"!==i.displayMode&&"blind"!==i.displayMode||a.open(),l(document).trigger("dateboxaftercreate")},_destroy:function(){var e=this,t=this.options,a=e.d.wrap.find("dbOpenButton");!0===t.useButton&&(a.remove(),e.d.input.unwrap()),t.lockInput&&e.d.input.removeAttr("readonly"),e.d.input.off("datebox").off("focus.datebox").off("blur.datebox").off("change.datebox"),l(document).off(e.drag.eMove).off(e.drag.eStart).off(e.drag.eEnd).off(e.drag.eEndA).off("resize"+e.eventNamespace)},disable:function(){this.d.input.attr("disabled",!0),this.disabled=!0,this._t({method:"disable"})},enable:function(){this.d.input.attr("disabled",!1),this.disabled=!1,this._t({method:"enable"})},open:function(){var t=this,a=this.options,e=a.displayMode,i={};if(a.useFocus&&!0===t.fastReopen)return t.d.input.blur(),!1;if(t.theDate=t._makeDate(t.d.input.val()),t.originalDate=t.theDate.copy(),""===t.d.input.val()&&t._startOffset(t.theDate),t.d.input.blur(),"function"!=typeof t._build[a.mode]?t._build.default.call(t):t._build[a.mode].call(t),"function"==typeof t._drag[a.mode]&&t._drag[a.mode].call(t),t._t({method:"refresh"}),!0===t.__("useArabicIndic")&&t._doIndic(),t.d.intHTML.is(":visible"))return!1;if(t.d.mainWrap.empty(),a.useHeader&&t.d.mainWrap.append(l(t.style_mainHead(t.d.headerText,a.theme_headerTheme,a.theme_headerBtn))).find(".dbCloser").on(a.clickEvent,function(e){e.preventDefault(),t._t({method:"close",closeCancel:!0})}),t.d.mainWrap.append(t.d.intHTML).css("zIndex",a.zindex),t._t({method:"postrefresh"}),a.openCallback=t._prepFunc(a.openCallback),!1!==a.openCallback?i.afteropen=function(){t._t({method:"postrefresh"}),!1===a.openCallback.apply(t,[{initDate:t.initDate,date:t.theDate,duration:t.lastDuration}].concat(a.openCallbackArgs))&&t._t({method:"close"})}:i.afteropen=function(){t._t({method:"postrefresh"})},a.beforeOpenCallback=t._prepFunc(a.beforeOpenCallback),!1!==a.beforeOpenCallback&&!1===a.beforeOpenCallback.apply(t,[{initDate:t.initDate,date:t.theDate,duration:t.lastDuration}].concat(a.beforeOpenCallbackArgs)))return!1;switch(a.displayMode){case"inline":case"blind":t.initDone?"blind"===a.displayMode&&(t.refresh(),t.d.mainWrap.slideDown()):(t.d.mainWrap.insertAfter(t.style_attach(!0)).addClass(a.theme_inlineContainer).css({zIndex:"auto",marginRight:"right"===a.displayInlinePosition?0:"auto",marginLeft:"left"===a.displayInlinePosition?0:"auto"}),"blind"===a.displayMode&&t.d.mainWrap.hide(),t.initDone=!0),t._t({method:"postrefresh"});break;default:t.d.mainWrap.show().css("zIndex",a.zindex).appendTo(t.style_attach(!1)).addClass(a.theme_modalContainer).one(a.tranDone,function(){t.d.mainWrap.is(":visible")?i.afteropen.call():(i.afterclose.call(),t.d.mainWrap.removeClass("db-show"))}),t.d.backdrop=l("<div class='jtsage-datebox-backdrop-div'></div>").css(a.theme_backgroundMask).css("zIndex",a.zindex-1).appendTo("modal"===a.displayMode?t.style_attach(!1):"body").on(a.clickEvent,function(e){e.preventDefault(),a.dismissOutsideClick&&t._t({method:"close",closeCancel:!0})}),t.d.mainWrap.css("modal"===a.displayMode?t.getModalPosition.call(t):t.getDropPosition.call(this,a.displayDropdownPosition))}"modal"!==e&&"dropdown"!==e||(l(document).on("resize"+t.eventNamespace,function(){this.d.mainWarp.css("modal"===e?this.getModalPosition.call(this):this.getDropPosition.call(this,this.options.displayDropdownPosition))}.bind(t)),a.dismissOnEscape&&l(document).on("keydown"+t.eventNamespace,function(e){("key"in e?"Escape"===e.key||"Esc"===e.key:27===e.keyCode)&&this._t({method:"close",closeCancel:!0})}.bind(t))),window.setTimeout(function(){t.d.mainWrap.addClass("db-show")},0),window.setTimeout(function(){t.d.mainWrap.trigger("oTransitionEnd")},200)},style_attach:function(e){var t=this.d.wrap.parent(),a=l("body").find("#"+this.baseID+"-dbAttach");return 1===a.length?a:e?t.hasClass("ui-field-contain")?t:this.d.wrap:1===(t=l(".ui-page-active")).length?t:1===(t=this.d.input.closest("[data-role='page']")).length?t:l("body")},style_btn:function(e,t){var a;return t=void 0===t?"":t,a="<a href='#' role='button' class='ui-btn ui-mini ui-btn-"+e[1],a+=!1!==e[0]?" ui-icon-"+e[0]:"",a+=""===t?" ui-corner-all ui-btn-icon-notext":" ui-btn-icon-left",a+="'>"+t+"</a>"},style_btnGrp:function(e){return l("<div style='"+(e?"margin: 0 auto;":"margin: 0 .446em")+"' class='ui-controlgroup-controls'>")},style_btnGrpOut:function(e,t){var a=!0===e?"ui-controlgroup-horizontal":"ui-controlgroup-vertical",i=!0===e?"style='text-align:center'":"";return t.find(".ui-btn").last().addClass("ui-last-child"),t.find(".ui-btn").first().addClass("ui-first-child"),l("<div "+i+" class='ui-controlgroup "+a+"'>").append(t)},style_inWrap:function(e){return e.parent().enhanceWithin(),e.parent().addClass("ui-input-has-clear")},style_inBtn:function(e,t){return"<a href='javascript: return false;' class='dbOpenButton ui-input-clear ui-btn ui-icon-"+e+" ui-btn-icon-notext ui-corner-all' title='"+t+"'>"+t+"</a>"},style_inNoBtn:function(e){e.parent().removeClass("ui-has-clear")},style_inHide:function(){var e=this.d.wrap.parent();e.hasClass("ui-field-contain")?e.hide():this.d.wrap.hide()},style_mainHead:function(e,t,a){return"<div class='ui-header ui-bar-"+t+"'><h1 class='ui-title'>"+e+"</h1>"+this.style_btn([a[0],a[1]+" dbCloser ui-btn-right"])+"</div>"},style_subHead:function(e){return l("<div class='dbHeader'><h3 class='center'>"+e+"</h3></div>")},style_pnHead:function(e,t,a,i,n){var o=l("<div class='ui-header' style='border:0; padding: 0 3px 8px;'>");return l(this.style_btn([t[0],t[1]+" ui-btn-left "+i])).appendTo(o),l("<h3 class='ui-title' style='margin: 0 15%'>"+e+"</h3>").appendTo(o),l(this.style_btn([a[0],a[1]+" ui-btn-right "+n])).appendTo(o),o},style_picker:function(e,t,a,i){var n=0,o="<div style='padding-bottom: 8px' class='ui-controlgroup ui-controlgroup-horizontal ui-corner-all ui-mini'>";for(o+="<div class='ui-controlgroup-controls w-100'>",o+="<div class='ui-select' style='width:60%'>",o+="<div id='"+a+"-button' class='ui-btn-"+t+" ui-btn ui-icon-carat-d ui-btn-icon-right ui-corner-all ui-shadow ui-first-child'>",n=0;n<e.month.length;n++)!0===e.month[n][2]&&(o+="<span>"+e.month[n][1]+"</span>");for(o+=this._stdSel(e.month,a,""),o+="</div></div>",o+="<div class='ui-select' style='width:40%'>",o+="<div id='"+i+"-button' class='ui-btn-"+t+" ui-btn ui-icon-carat-d ui-btn-icon-right ui-corner-all ui-shadow ui-last-child'>",n=0;n<e.year.length;n++)!0===e.year[n][2]&&(o+="<span>"+e.year[n][1]+"</span>");return o+=this._stdSel(e.year,i,""),o+="</div></div>",l(o+="</div></div>")},style_dateList:function(e,t,a,i){var n="",o=t.slice();return o.unshift([!1,e,!0]),n+="<div class='ui-select'>",n+="<div id='"+i+"-button' style='margin: 0 .446em 8px;' class='ui-mini ui-btn ui-icon-carat-d ui-btn-"+a+" ui-btn-icon-right ui-corner-all'>",n+="<span>"+e+"</span>",n+=this._stdSel(o,i,""),l(n+="</div></div>")},style_calGrid:function(){return l("<div><table class='dbCalGrid w-100'></table></div>")},style_calRow:function(){return l("<tr>")},style_calBtn:function(e,t){var a="width:"+100/t+"%",i=["dbEvent","ui-btn","ui-mini","m0","ui-btn-"+e.theme,e.bad?"ui-disabled":""],n=e.bad?"disabled='disabled'":"";return l("<td class='p0 m0' style='"+a+"'><a style='"+["padding-right:0","padding-left:0"].join(";")+"' class='"+i.join(" ")+"' href='#' "+n+">"+e.displayText+"</a></td>")},style_calTxt:function(e,t,a){return l("<td class='p0 m0 center' style='"+["width:"+100/a+"%",t?"font-weight:bold":""].join(";")+"'>"+e+"</td>")},style_dboxCtr:function(){return l("<table class='w-100'>")},style_dboxRow:function(){return l("<tr>")},style_dboxCtrl:function(e,t,a,i,n){var o="";return o+="<td class='dbBox"+a+"'>",o+="<a href='#' role='button' class='ui-corner-all ui-btn ui-mini ui-btn-",o+=t[1]+" ui-icon-"+t[0]+" ui-btn-icon-top dbBoxNext m0' ",o+="style='padding-top:2.1em; border-bottom-left-radius:0;border-bottom-right-radius:0;'>",o+="</a>",null!==i&&(o+="<div class='m0 center ui-input-text ui-body-inherit' style='height:auto; padding: .3em 0;'>"+i+"</div>"),o+="<div class='m0 ui-input-text ui-mini ui-body-"+n+"'>",o+="<input class='p0 center' type='text'></div>",o+="<a href='#' role='button' class='ui-corner-all ui-btn ui-mini ui-btn-",o+=e[1]+" ui-icon-"+e[0]+" ui-btn-icon-top dbBoxPrev m0' ",o+="style='padding-top:2.1em; border-top-left-radius:0;border-top-right-radius:0;'>",o+="</a>",l(o+="</div>")},style_slideGrid:function(){return l("<div><table class='dbSlideGrid w-100'></table></div>")},style_slideRow:function(){return l("<tr>")},style_slideBtn:function(e){var t=e.bad?"disabled='disabled'":"",a="class='m0 dbEventS w-100 ui-btn ui-mini ui-btn-"+e.theme+(e.bad?" disabled":"")+"'";return l("<td class='m-0 p-0 text-center' style='width: 12.5%'><a style='padding:.7em 0;' href='#' "+a+" "+t+"><small>"+this.__("daysOfWeekShort")[e.dateObj.getDay()]+"</small><br>"+e.dateObj.getDate()+"</a></td>")},style_slideCtrl:function(e,t){var a="class='m0 ui-corner-all ui-btn ui-mini ui-btn-icon-notext ui-btn-"+t[1]+" "+e+" ui-icon-"+t[0]+"'";return l("<td  style='width: 6.25%'><a href='#' "+a+"></a></td>")},style_fboxCtr:function(e){return l("<div style='margin: 0 5px 8px; height: "+e+"; overflow: hidden'>")},style_fboxDurLbls:function(){return l("<div style='margin: 5px;'>")},style_fboxDurLbl:function(e,t){return l("<div class='center' style='display:inline-block; width: "+100/t+"%'>"+e+"</div>")},style_fboxRollCtr:function(e){return l("<div style='float:left; width:"+100/e+"%'>")},style_fboxRollPrt:function(){return l("<ul style='list-style-type: none; display: inline;'>")},style_fboxRollCld:function(e,t){return l("<li style='height: 30px; line-height: 30px;' class='center ui-body-"+t+"'>"+e+"</li>")},style_fboxLens:function(){return l("<div style='width: 96%; height: 40px; border: 1px solid #eee; margin: 0 1.5%;' class='ui-overlay-shadow'>")},style_fboxPos:function(){var e,t,a,i,n=this.options,o=this.d.intHTML.find(".dbRollerV").outerHeight(),s=this.d.intHTML.find(".dbLens").first(),r=s.outerHeight();i=-1*(o/2+r/2),s.css({top:i+-3,marginBottom:-1*r}),this.d.intHTML.find(".dbRoller").each(function(){e=l(this),"0px"===(t=e.children().first()).css("marginTop")&&(a=(e.children().length+1)*t.outerHeight(),i=a/2*-1+o/2,!1!==n.flipboxLensAdjust&&(i+=n.flipboxLensAdjust),t.css("margin-top",i))})},_dbox_run_update:function(e){var t=this,a=this.options,i="durationbox"===a.mode;i&&t._getCleanDur(),!0!==e&&!0!=i&&(t._check(),"datebox"!==a.mode&&"datetimebox"!==a.mode||t.d.intHTML.find(".dbHeader").childern().first().text(t._formatter(t.__("headerFormat"),t.theDate)),a.useSetButton&&(!1===t.dateOK?t.setBut.addClass(a.disabledState):t.setBut.removeClass(a.disabledState))),t.d.intHTML.find("input").each(function(){switch(l(this).data("field")){case"y":l(this).val(t.theDate.get(0));break;case"m":l(this).val(t.theDate.get(1)+1);break;case"d":l(this).val(i?t.lastDurationA[0]:t.theDate.get(2));break;case"h":i?l(this).val(t.lastDurationA[1]):12===t.__("timeFormat")?l(this).val(t.theDate.get12hr()):l(this).val(t.theDate.get(3));break;case"i":i?l(this).val(t.lastDurationA[2]):l(this).val(t._zPad(t.theDate.get(4)));break;case"M":l(this).val(t.__("monthsOfYearShort")[t.theDate.get(1)]);break;case"a":l(this).val(t.__("meridiem")[11<t.theDate.get(3)?1:0]);break;case"s":i?l(this).val(t.lastDurationA[3]):l(this).val(t._zPad(t.theDate.get(5)))}}),!0===t.__("useArabicIndic")&&t._doIndic()},_dbox_enter:function(e){var t,a=parseInt(e.val(),10),i=this,n=0;if("durationbox"===this.options.mode)i.d.intHTML.find("input").each(function(){switch(a=parseInt(l(this).val(),10),l(this).data("field")){case"d":n+=86400*a;break;case"h":n+=3600*a;break;case"i":n+=60*a;break;case"s":n+=a}}),i.theDate.setTime(i.initDate.getTime()+1e3*n);else if("M"===e.data("field")&&-1<(t=i.__("monthsOfYearShort").indexOf(e.val()))&&i.theDate.setMonth(t),""!==e.val()&&0===e.val().toString().search(/^[0-9]+$/))switch(e.data("field")){case"y":i.theDate.setD(0,a);break;case"m":i.theDate.setD(1,a-1);break;case"d":i.theDate.setD(2,a);break;case"h":i.theDate.setD(3,a);break;case"i":i.theDate.setD(4,a);break;case"s":i.theDate.setD(5,a)}setTimeout(function(){i.refresh()},150)}})}(jQuery),function(e){e(document).ready(function(){e("[data-role='datebox']").each(function(){e(this).datebox()})})}(jQuery);
//# sourceMappingURL=jtsage-datebox.min.js.map